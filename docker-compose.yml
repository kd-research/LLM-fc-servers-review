name: ollama-jupyter

services:
  ollama:
    image: ollama/ollama
    user: "${UID}:${GID}"
    ports:
      - "11434"
    networks:
      internal_network:
        aliases:
          - ollama
    volumes:
      - ./.cache/ollama:/root/.ollama
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
              driver: nvidia
              count: 1

  jupyter:
    image: jupyter/base-notebook
    ports:
      - "8888:8888"
    networks:
      - internal_network
    volumes:
      - ./notebooks:/home/jovyan/work
      - ./configs/jupyter_notebook_config.py:/home/jovyan/.jupyter/jupyter_notebook_config.py
    env_file:
      - .env

networks:
  internal_network:


